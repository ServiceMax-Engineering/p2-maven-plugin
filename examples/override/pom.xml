<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.reficio.rcp</groupId>
    <artifactId>example-p2-site</artifactId>
    <packaging>pom</packaging>
    <version>1.0.0</version>

    <build>
        <plugins>
            <plugin>
                <groupId>org.reficio</groupId>
                <artifactId>p2-maven-plugin</artifactId>
                <version>1.0.0-SNAPSHOT</version>
                <executions>
                    <execution>
                        <id>default-cli</id>
                        <!--
                            This is the configuration that overrides the default MANIFEST.MF files
                            in jars that are already OSGi bundles. <override>true</override>
                            section has to be included.

                            If you want to override the default MANIFEST.MF you also have to
                            disable the fetch of the transitive dependencies, otherwise it would
                            not make much sense. When you override the file generated by the provider
                            of the jar you probably know what you are doing - which means you are
                            fine-tuning the MANIFEST.MF options. If transitive dependencies were included
                            your fine-tuning would be applied to all of them, which in our opinion does
                            not make sense and may lead to unexpected behavior. If you do not specify
                            <transitive>false</transitive> along the <override>true</override> an
                            exception will be thrown.

                            If you do not specify bnd instructions the MANIFEST.MF will be overridden
                            using the default instructions. Please see the examples/default/pom.xml
                            for more info.

                            What would be the behavior:
                              - specified dependencies will be fetched
                              - transitive dependencies will NOT be fetched
                              - jars that are NOT osgi bundles will be "bundled" using bnd tool,
                                if you specify instructions they will be APPLIED
                              - jars that are osgi bundles will be "bundled" using bnd tool
                                if you specify instructions they will be APPLIED
                              - p2 site will be generated

                            This definition of an artifact should look like this:
                                <artifact>
                                    <id>commons-io:commons-io:2.1</id>
                                    <transitive>false</transitive>
                                    <override>true</override>
                                </artifact>

                            you can also specify some instructions (what makes sense with override):
                                <artifact>
                                    <id>commons-io:commons-io:2.1</id>
                                    <transitive>true</transitive>
                                    <override>false</override>
                                    <instructions>
                                        <Import-Package>*;resolution:=optional</Import-Package>
                                        <Export-Package>*</Export-Package>
                                    </instructions>
                                </artifact>

                            Other instructions, such as, Bundle-SymbolicName, Bundle-Name, Bundle-Version,
                            are calculated according to the following rules:
                            http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html
                            -->
                        <configuration>
                            <artifacts>
                                <artifact>
                                    <id>commons-lang:commons-lang:2.4</id>
                                    <transitive>false</transitive>
                                    <override>true</override>
                                </artifact>
                                <artifact>
                                    <id>commons-lang:commons-lang:2.5</id>
                                    <transitive>false</transitive>
                                    <override>true</override>
                                </artifact>
                                <artifact>
                                    <id>commons-lang:commons-lang:2.6</id>
                                    <transitive>false</transitive>
                                    <override>true</override>
                                </artifact>
                            </artifacts>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <pluginRepositories>
        <pluginRepository>
            <id>reficio</id>
            <url>http://repo.reficio.org/maven/</url>
        </pluginRepository>
    </pluginRepositories>

</project>


